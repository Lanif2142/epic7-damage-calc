<!DOCTYPE html>
<mat-toolbar class="navbar" [class.small]="screenService.smallScreen.value">
    <span class="neat-container absolute-left">
        <img class="navbar-icon" [class.small]="screenService.smallScreen.value" [class.tiny]="screenService.tinyScreen.value" src="assets/icons/{{toolSelection.value}}_logo.png" alt="Revive buff icon">
        <span *ngIf="!screenService.microscopicScreen.value" [class.medium-text]="screenService.smallScreen.value && !screenService.tinyScreen.value" [class.small-text]="screenService.tinyScreen.value">{{'app_title' | translate:'titles':languageService.language.value}}</span>
    </span>
    <div class="navbar-options">        
        <span class="neat-container">
            <span *ngIf="screenService.largeScreen.value; else smallScreenPageSelect" class="neat-container">
                <span *ngFor="let toolTitle of toolTitles; let i = index" class="margin-left navbar-link"
                    [class.selected]="toolSelection.value === toolTitle" [class.left]="i === 0"
                    (click)="selectTool(toolTitle)">
                    {{toolTitle | translate:'titles':languageService.language.value}}
                </span>
            </span>
            <ng-template #smallScreenPageSelect>
                <mat-form-field class="navbar-picker tool-picker" [class.small]="screenService.tinyScreen.value">
                    <mat-select hideSingleSelectionIndicator [formControl]="toolSelection" (selectionChange)="selectTool($event.value)">
                        <!-- This trigger has the same value but is here for styling purposes -->
                        <mat-select-trigger class="tool-trigger" [class.medium-text]="screenService.smallScreen.value && !screenService.tinyScreen.value" [class.small-text]="screenService.tinyScreen.value">
                            <span class="neat-container">
                                {{toolSelection.value | translate:'titles':languageService.language.value}}
                            </span>
                        </mat-select-trigger>
                        <mat-option *ngFor="let toolTitle of toolTitles" [value]="toolTitle">
                            {{toolTitle | translate:'titles':languageService.language.value}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </ng-template>
        </span>
    </div>
    <!-- Delay rendering language picker until initial language has been determined -->
    <span *ngIf="languageService.language.value" class="absolute-right">
        <mat-form-field class="navbar-picker language-picker" [class.small]="screenService.tinyScreen.value">
            <mat-select hideSingleSelectionIndicator [formControl]="languageSelection" (selectionChange)="selectLanguage($event)">
                <mat-select-trigger class="language-trigger">
                    <span *ngIf="!screenService.smallScreen.value || true; else shortenedTrigger" [class.small-text]="screenService.tinyScreen.value">
                        {{languageSelection.value.localName}} <app-flag [country]="languageSelection.value.countryCode"></app-flag>
                    </span>
                    <ng-template #shortenedTrigger>
                        <span>
                            {{(languageSelection.value.code | uppercase) + '-' + (languageSelection.value.countryCode | uppercase)}} <app-flag [country]="languageSelection.value.countryCode"></app-flag>
                        </span>
                    </ng-template>
                </mat-select-trigger>
                <mat-option *ngFor="let language of languages" [value]="language">
                    {{language.localName}} <app-flag [country]="language.countryCode"></app-flag>
                </mat-option>
            </mat-select>
        </mat-form-field>
    </span>
</mat-toolbar>